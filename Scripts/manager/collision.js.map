{"version":3,"sources":["manager/collision.ts"],"names":[],"mappings":"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","file":"manager/collision.js","sourcesContent":["/*\r\n ***************************************************************************************\r\n * Source file name : collision.ts                                                     *\r\n * Author's name : Duc Minh Tran (300771859)                                           *\r\n * Last Modified by : Duc Minh Tran (300771859)                                        *\r\n * Last Modified date : March 27 2016                                                  *\r\n * Program description : This is a webgame that use  a Side Scroller background        * \r\n *                                                                                     *  \r\n * Revision History : 1 - Update Internal Documentation                                *\r\n *                                                                                     *\r\n ***************************************************************************************\r\n*/\r\n\r\nmodule managers {\r\n    //Collision class\r\n    export class Collision {\r\n        private _player: objects.Player;\r\n        private _playScn: scenes.Play;\r\n\r\n        private static _counter: number;\r\n        private static _healCounter: number;\r\n        private static _shockCounter: number;\r\n\r\n\r\n\r\n        constructor(player: objects.Player, playScene: scenes.Play) {\r\n            this._player = player;\r\n            Collision._counter = 0;\r\n            Collision._healCounter = 0;\r\n            Collision._shockCounter = 0;\r\n            this._playScn = playScene;\r\n\r\n        }\r\n\r\n        public distance(startPoint: createjs.Point, endPoint: createjs.Point): number {\r\n            return Math.sqrt(Math.pow(endPoint.x - startPoint.x, 2) + Math.pow(endPoint.y - startPoint.y, 2));\r\n        }\r\n\r\n        //check collision between player and objects\r\n        public check(obj: objects.GameObject): void {\r\n            var startPoint: createjs.Point = new createjs.Point();\r\n            var endPoint: createjs.Point = new createjs.Point();\r\n\r\n            var playerHalfWidth: number = this._player.width * 0.5;\r\n            var objHalfWidth: number = obj.width * 0.5;\r\n\r\n            var minDistance: number = playerHalfWidth + objHalfWidth;\r\n\r\n            startPoint.x = this._player.x;\r\n            startPoint.y = this._player.y;\r\n\r\n            endPoint.x = obj.x;\r\n            endPoint.y = obj.y;\r\n\r\n            if (!this._player.isDead) {\r\n                if (this.distance(startPoint, endPoint) < minDistance) {\r\n                    // check if it's an health hit\r\n                    if (obj.name === \"health\") {\r\n                        this._player.hitHealth = true;\r\n                        obj.setImage(\"blank\");\r\n                        this._playScn.point += 1;\r\n                        this._playScn.healthIMG.rotation += 4;\r\n                        if (this._playScn.health < 100) {\r\n                            this._playScn.health += 0.5;\r\n                        }\r\n                        if (this._playScn.health > 100) {\r\n                            this._playScn.health = 100;\r\n                        }\r\n\r\n\r\n\r\n                        if (Collision._healCounter % 60 === 0) {\r\n                            createjs.Sound.play(\"heal\");\r\n                            Collision._healCounter = 0;\r\n                        }\r\n\r\n                        //console.log(Collision._healCounter);\r\n                        Collision._healCounter++;\r\n\r\n\r\n\r\n                    }\r\n                    // check if it's a captainShield hit\r\n                    else if (obj.name === \"captainShield\") {\r\n                        this._player.hitShield = true;\r\n                        this._playScn.point -= 2;\r\n                        this._playScn.healthIMG.rotation -= 2;\r\n                        this._playScn.health -= 0.1;\r\n\r\n\r\n                        if (Collision._shockCounter % 60 === 0) {\r\n                            createjs.Sound.play(\"shocked\").volume = 0.5;\r\n                            Collision._shockCounter = 0;\r\n                        }\r\n\r\n                        Collision._shockCounter++;\r\n                    }\r\n                }\r\n                else {\r\n                    //set this line after a while \r\n                    //this is a drity fix\r\n                    if (Collision._counter % 120 === 0) {\r\n                        this._player.hitShield = false;\r\n                        Collision._counter = 0;\r\n                    }\r\n                    this._player.hitHealth = false;\r\n\r\n                }\r\n            }\r\n\r\n\r\n            Collision._counter++;\r\n        }\r\n\r\n        //check collision between bullet and objects\r\n        public bulletCollision(obj1: objects.Bullet, obj2: objects.CaptainShield) {\r\n            var startPoint: createjs.Point = new createjs.Point();\r\n            var endPoint: createjs.Point = new createjs.Point();\r\n\r\n            var obj1HalfWidth: number = obj1.width * 0.5;\r\n            var obj2HalfWidth: number = obj2.width * 0.5;\r\n\r\n            var minDistance: number = obj1HalfWidth + obj2HalfWidth;\r\n\r\n            startPoint.x = obj1.x;\r\n            startPoint.y = obj1.y;\r\n\r\n            endPoint.x = obj2.x;\r\n            endPoint.y = obj2.y;\r\n\r\n            if (!this._player.isDead) {\r\n                if (this.distance(startPoint, endPoint) < minDistance) {\r\n                    //console.log(\"hit\");\r\n                    obj2.speed.y = Math.round((Math.random() * 30) - 15);\r\n                    obj2.speed.x += 2;\r\n                    this._playScn.point += 10;\r\n                    createjs.Sound.play(\"ricochet\");\r\n                }\r\n                else {\r\n\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}"],"sourceRoot":"/source/"}